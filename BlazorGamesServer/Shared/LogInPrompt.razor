@using BlazorGamesServer.Data

<h4>Log In Prompt</h4>

@*TODO: use SignalR to reload state without refreshing page*@
<form> @*form because I want it to reload after login I think...*@
    <label>
        Username:
        <input @bind="userName" size="20" required />
    </label>
    <button @onclick="logInSubmit">Log In</button>
</form>

@code {
    private string? userName;

    private async Task logInSubmit()
    {
        var userState = await ProtectedSessionStore.GetAsync<User>("user");
        if (userState.Success)
        {
            userState.Value?.SetName(userName);
            await ProtectedSessionStore.SetAsync("user", userState.Value);
            StateHasChanged();
        }
    }
}
